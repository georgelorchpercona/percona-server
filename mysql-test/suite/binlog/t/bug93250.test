#
# Bug 93250 fix.
#
--source include/have_debug.inc

CREATE TABLE t_myisam(a INT NOT NULL) ENGINE=Myisam;
SET @debug_save= @@GLOBAL.DEBUG;
SET @@GLOBAL.DEBUG= '+d,simulate_failure_in_before_commit_hook';
--error ER_RUN_HOOK_ERROR
# Crash if the bug is not fixed
DROP TABLE t_myisam;
# The table will be dropped because MyISAM does not support transactional DDL,
# and if error takes place on commit to binary log, the table will already
# be dropped, and this operation will not be rolled back. So there is no need
# to drop the table again to cleanup.
SET @@GLOBAL.DEBUG= @debug_save;
